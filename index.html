<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Esports Calendar (CS2)</title>

  <!-- Tailwind y FullCalendar -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet" />

  <!-- Tu CSS -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-gray-900 text-gray-100 font-sans">
  <header class="header">
    <h1 id="pageTitle">Calendario de Esports (CS2)</h1>
  </header>

  <div class="container mx-auto p-4">
    <div class="flex justify-between items-center mb-6">
      <div class="language-switch">
        <button id="lang-es" class="language-btn" onclick="setLanguage('es')">🇪🇸</button>
        <button id="lang-en" class="language-btn" onclick="setLanguage('en')">🇺🇸</button>
      </div>
      <button id="toggleTheme" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Modo Claro</button>
    </div>

    <p id="storageNote" class="text-center text-gray-400 mb-6">
      Los datos se guardan localmente en tu navegador. Exporta tu calendario para respaldarlo o compartirlo. No compartas el archivo JSON si contiene información sensible.
    </p>

    <!-- Calendario -->
    <div id="calendar" class="card mb-6"></div>

    <!-- Formulario para agregar/editar torneos -->
    <div class="card mb-6">
      <h2 id="formTitle" class="text-xl font-semibold mb-4 text-white">Agregar Nuevo Torneo</h2>
      <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
        <input id="tournamentName" type="text" placeholder="Nombre del Torneo" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <select id="tournamentTier" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"></select>
        <div class="flex flex-col">
          <label id="startDateLabel" for="startDate" class="text-sm text-gray-300">Fecha de Inicio</label>
          <input id="startDate" type="date" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>
        <div class="flex flex-col">
          <label id="endDateLabel" for="endDate" class="text-sm text-gray-300">Fecha de Fin</label>
          <input id="endDate" type="date" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>
        <input id="tournamentTeams" type="text" placeholder="Equipos (separados por coma)" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <input id="tournamentLocation" type="text" placeholder="Ubicación (ej. Londres, Online)" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <select id="tournamentModality" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="Online">Online</option>
          <option value="Offline">Offline</option>
          <option value="Online/Offline">Online/Offline</option>
        </select>
        <select id="tournamentColor" class="p-2 border rounded bg-gray-700 text-gray-100 border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500"></select>
        <div class="flex items-center">
          <input id="tournamentVRS" type="checkbox" class="mr-2 text-blue-500 focus:ring-blue-500" />
          <label id="vrsLabel" for="tournamentVRS" class="text-gray-300">Cuenta para el VRS</label>
        </div>
      </div>
      <div class="mt-4 flex gap-4 justify-center">
        <button id="saveButton" onclick="saveTournament()" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Agregar Torneo</button>
        <button id="cancelEditButton" onclick="cancelEdit()" class="hidden bg-gray-600 text-white p-2 rounded hover:bg-gray-700">Cancelar</button>
        <button id="exportButton" onclick="exportTournaments()" class="bg-green-600 text-white p-2 rounded hover:bg-green-700">Exportar</button>
        <input type="file" id="importFile" accept=".json" class="hidden" onchange="importTournaments(event)" />
        <button id="importButton" onclick="document.getElementById('importFile').click()" class="bg-purple-600 text-white p-2 rounded hover:bg-purple-700">Importar</button>
        <button id="helpButton" onclick="showHelp()" class="bg-yellow-600 text-white p-2 rounded hover:bg-yellow-700">Ayuda</button>
        <button id="clearAllButton" onclick="confirmClearAll()" class="bg-red-600 text-white p-2 rounded hover:bg-red-700">Borrar todo</button>
      </div>
    </div>

    <!-- Tabla de torneos -->
    <div class="card">
      <table id="tournamentTable" class="min-w-full bg-gray-800 rounded-lg">
        <thead>
          <tr class="bg-gray-700 text-gray-300 uppercase text-sm leading-normal">
            <th id="thTournament" class="py-3 px-6 text-left">Torneo</th>
            <th id="thTier" class="py-3 px-6 text-left">Tier</th>
            <th id="thDates" class="py-3 px-6 text-left cursor-pointer" onclick="sortByDate()">Fechas</th>
            <th id="thTeams" class="py-3 px-6 text-left">Equipos</th>
            <th id="thLocation" class="py-3 px-6 text-left">Ubicación</th>
            <th id="thModality" class="py-3 px-6 text-left">Modalidad</th>
            <th id="thColor" class="py-3 px-6 text-left">Color</th>
            <th id="thVRS" class="py-3 px-6 text-left cursor-pointer" onclick="sortByVRS()">VRS</th>
            <th id="thActions" class="py-3 px-6 text-center">Acciones</th>
          </tr>
        </thead>
        <tbody id="tournamentBody" class="text-gray-300 text-sm font-light">
          <!-- Los torneos se agregarán aquí dinámicamente -->
        </tbody>
      </table>
    </div>

    <!-- Modal de ayuda -->
    <div id="helpModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 hidden flex items-center justify-center">
      <div class="bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full">
        <h3 id="helpTitle" class="text-xl font-semibold mb-4 text-white">Ayuda</h3>
        <p id="helpIntro" class="text-gray-300 mb-4">Bienvenido al Calendario de Esports (CS2). Aquí tienes las instrucciones básicas:</p>
        <ul id="helpList" class="list-disc list-inside text-gray-300 mb-4">
          <li><strong id="helpAdd">Agregar Torneo:</strong> Completa el formulario y haz clic en "Agregar Torneo".</li>
          <li><strong id="helpEdit">Editar Torneo:</strong> Haz clic en "Editar" en la tabla o en un evento del calendario.</li>
          <li><strong id="helpDelete">Eliminar Torneo:</strong> Haz clic en "Eliminar" y confirma.</li>
          <li><strong id="helpExport">Exportar:</strong> Descarga un archivo JSON con tus torneos para respaldarlo o compartirlo.</li>
          <li><strong id="helpImport">Importar:</strong> Selecciona un archivo JSON para cargar torneos previos.</li>
          <li><strong id="helpClear">Borrar todo:</strong> Usa "Borrar todo" para eliminar todos los torneos (con confirmación).</li>
          <li><strong id="helpNote">Nota:</strong> Los datos se guardan localmente. No compartas el JSON si contiene información sensible.</li>
        </ul>
        <button id="closeHelp" onclick="hideHelp()" class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Cerrar</button>
      </div>
    </div>
  </div>

  <footer class="bg-gray-800 text-gray-300 p-4 text-center w-full">
    <p>
      ¿Tienes alguna pregunta? Contáctame en:
      <a href="mailto:joacobruses@gmail.com" class="text-blue-400 hover:underline">joacobruses@gmail.com</a>
      | Sigue mis actualizaciones en
      <a href="https://x.com/jbruses_" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:underline">X</a>
    </p>
  </footer>

  <!-- Tu JS -->
  <script src="script.js"></script>
</body>
</html>